import{d as T,x as V,aJ as f,aK as A,aL as g,aM as h,E as e,ah as _,w as o,g as u,aN as y,aO as E,c as s,h as r,aj as x,f as d,t as k,e as v,ag as I,F as M,s as w,aP as j,aQ as z,aR as F,k as O,ac as Q,an as q}from"./vay-6yAt.js";import{_ as H,a as J}from"./Cj_2cAoO.js";import K from"./aEPk4T3P.js";import{u as X,_ as Y,a as G}from"./ByHX3fqH.js";import"./DoCqKmLP.js";import"./C-v3KzvZ.js";import"./Dnd51l0P.js";const W=d("span",{class:"text-gray-500 dark:text-gray-400"},"Â·",-1),Z={class:"text-gray-500 dark:text-gray-400"},tt={class:"flex flex-wrap items-center gap-3 mt-4"},et={key:1},lt=T({__name:"[slug]",async setup(at){var p;let a,c;const i=V(),{data:t}=([a,c]=f(()=>y(i.path,()=>w(i.path).findOne(),"$Qh4t3Yy4IX")),a=await a,c(),a);if(!t.value)throw A({statusCode:404,statusMessage:"Post not found",fatal:!0});const{data:m}=([a,c]=f(()=>y(`${i.path}-surround`,()=>w("/scripted").where({_extension:"md"}).without(["body","excerpt"]).sort({date:-1}).findSurround(j(i.path)),{default:()=>[]})),a=await a,c(),a);if(g({title:t.value.title,ogTitle:t.value.title,description:t.value.description,ogDescription:t.value.description}),(p=t.value.image)!=null&&p.src){const l=X();g({ogImage:h(l.url,t.value.image.src),twitterImage:h(l.url,t.value.image.src)})}return(l,nt)=>{const C=z,U=Q,$=q,b=H,B=K,S=Y,P=J,D=G,N=F,L=E;return e(t)?(s(),_(L,{key:0},{default:o(()=>[r(b,{title:e(t).title,description:e(t).description},{headline:o(()=>[r(C,x(e(t).badge,{variant:"subtle"}),null,16),W,d("time",Z,k(new Date(e(t).date).toLocaleDateString("en",{year:"numeric",month:"short",day:"numeric"})),1)]),default:o(()=>[d("div",tt,[(s(!0),v(M,null,I(e(t).directors,(n,R)=>(s(),_($,{key:R,to:n.to,color:"white",target:"_blank",size:"sm"},{default:o(()=>[r(U,x({ref_for:!0},n.avatar,{alt:n.name,size:"2xs"}),null,16,["alt"]),O(" "+k(n.name),1)]),_:2},1032,["to"]))),128))])]),_:1},8,["title","description"]),r(N,null,{right:o(()=>[e(t).body&&e(t).body.toc?(s(),_(D,{key:0,links:e(t).body.toc.links},null,8,["links"])):u("",!0)]),default:o(()=>[r(P,{prose:""},{default:o(()=>{var n;return[e(t)&&e(t).body?(s(),_(B,{key:0,value:e(t)},null,8,["value"])):u("",!0),(n=e(m))!=null&&n.length?(s(),v("hr",et)):u("",!0),r(S,{surround:e(m)},null,8,["surround"])]}),_:1})]),_:1})]),_:1})):u("",!0)}}});export{lt as default};
